{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/map/map.component.css","webpack:///./src/app/map/map.component.html","webpack:///./src/app/map/map.component.ts","webpack:///./src/app/stream.service.ts","webpack:///./src/app/web-socket.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \"\"","module.exports = \"<h1>{{ title }}</h1>\\n<div>\\n    <app-map></app-map>\\n</div>\\n\"","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'Map';\n}\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { MapComponent } from './map/map.component';\r\n\r\nimport { WebSocketService } from './web-socket.service';\r\nimport { StreamService } from './stream.service';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    MapComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    FormsModule\r\n  ],\r\n  providers: [\r\n    WebSocketService,\r\n    StreamService\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","module.exports = \"#map {\\r\\n    height: 75vh;\\r\\n    border: 1px solid seagreen;\\r\\n    margin: 5px;\\r\\n}\"","module.exports = \"<div id=\\\"map\\\"></div>\\r\\n<div id=\\\"info\\\">\\r\\n    <input #lat id=\\\"lat\\\" type=\\\"text\\\" placeholder=\\\"lat (Decimal)\\\"><input #lng id=\\\"lng\\\" type=\\\"text\\\" placeholder=\\\"lng (Decimal)\\\">\\r\\n    <br>\\r\\n    <input #alt id=\\\"alt\\\" type=\\\"number\\\" placeholder=\\\"alt (m)\\\" required>\\r\\n    <input #brng id=\\\"bearing\\\" type=\\\"number\\\" placeholder=\\\"bearing (deg)\\\">\\r\\n    <br>\\r\\n    <button class=\\\"btn\\\" type=\\\"submit\\\" (click)=\\\"startConnection()\\\">Connect</button>\\r\\n    <button class=\\\"btn\\\" type=\\\"submit\\\" (click)=\\\"generateVideoLayer(lat.value, lng.value, alt.value, brng.value)\\\">Sumbit</button>\\r\\n</div>\\r\\n<!-- hidden video element: source of video for distortableVideoOverlay plugin -->\\r\\n<div style=\\\"display: none;\\\" id=\\\"drone footage source\\\">\\r\\n    <video src=\\\"../../assets/video/breaking-waves.mp4\\\" autoplay loop alt=\\\"breaking waves\\\"></video>\\r\\n</div>\"","///<reference path=\"../../../node_modules/@types/node/index.d.ts\"/>\r\nimport { Component, OnInit, AfterViewInit } from '@angular/core';\r\nimport { environment } from '../../environments/environment';\r\nimport * as L from 'leaflet';\r\nimport 'leaflet-distortable-video';\r\nimport { StreamService } from '../stream.service';\r\nimport { WebSocketService } from '../web-socket.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-map',\r\n  templateUrl: './map.component.html',\r\n  styleUrls: ['./map.component.css']\r\n})\r\n\r\nexport class MapComponent implements OnInit {\r\n  map: L.Map;\r\n  defaultZoom = 12;\r\n  defaultCoords: L.LatLng = L.latLng(51.5777, -9.0080);\r\n  mapOptions = {\r\n    minZoom: 1,\r\n    maxZoom: 20,\r\n    id: 'mapbox.satellite',\r\n    accessToken: environment.MAPBOX_API_KEY\r\n  };\r\n\r\n  // coords of video corners\r\n  // to be determined by drone coord and alt - getCorner(droneCenter: L.Latlng): L.latlng[]\r\n  corners = {\r\n     topLeft: L.latLng([1, 5]),\r\n     topRight: L.latLng([1, 6]),\r\n     bottomRight: L.latLng([0, 6]),\r\n     bottomLeft: L.latLng([0, 5])\r\n  };\r\n  droneCenter: L.LatLng;\r\n  FOV = 94;   // fov of zenmuse x3 according to DJI website\r\n\r\n  // inject WebSocketService to be able to access messages from Kurento Media Sever\r\n  constructor(private socketService: WebSocketService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.map = L.map('map').setView(this.defaultCoords, this.defaultZoom);\r\n    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}',\r\n     this.mapOptions).addTo(this.map);\r\n  }\r\n\r\n  generateVideoLayer(lat1: number, lng1: number, alt: number, hding: number) {\r\n    this.getCorners(lat1, lng1, alt, hding);\r\n    // const waves = L.distortableVideoOverlay('../../assets/video/breaking-waves.mp4', this.corners, {opacity: 0.6}).addTo(this.map);\r\n    const waves = L.distortableVideoOverlay(document.querySelector('video'), this.corners, {opacity: 0.6}).addTo(this.map);\r\n  }\r\n\r\n  startConnection() {\r\n    this.socketService.connect(document.querySelector('video'));\r\n  }\r\n\r\n  /* ----------------------------------\r\n   * calculate coords of corners given drone center c, and altitude alt\r\n   * BEFORE rotation => up on screen = north\r\n   ----------------------------------- */\r\n  getCorners(lat1: number, lng1: number, alt: number, hding: number) {\r\n    this.droneCenter = new L.LatLng(Number(lat1), Number(lng1));\r\n    this.map.panTo(this.droneCenter);\r\n    console.log(this.droneCenter.toString());\r\n    const coords = [];  // coords of opposite corners (topRight, bottomLeft)\r\n    const R = this.radiusAtLat(Number(lat1));\r\n    const d = this.distanceFromC(Number(alt));\r\n    // get arctangent of FOV-> constant as FOV has aspect ratio 4:3\r\n    let theta = (Math.atan(4 / 3));\r\n\r\n\r\n    for (let i = 0; i < 2; i++) {\r\n      // caluclate new Lat\r\n      const temp1 = Math.sin( Number(lat1) * (Math.PI / 180) ) * Math.cos(d / R);\r\n      const temp2 = Math.cos( Number(lat1) * (Math.PI / 180) ) * Math.sin(d / R) * Math.cos(theta);\r\n      const lat2 = (Math.asin( temp1 + temp2) * (180 / Math.PI));\r\n      // calculate new Lng\r\n      const lng2 = Number(lng1) + (Math.atan2 (Math.sin(theta) * Math.sin(d / R) * Math.cos((Number(lat1)) * (Math.PI / 180)),\r\n                   Math.cos(d / R) - Math.sin( Number(lat1) * (Math.PI / 180)) * Math.sin(lat2 * (Math.PI / 180))) * (180 / Math.PI));\r\n\r\n      console.log(lat2 + ': lat2,  ' + lng2 + ' :lng2');\r\n      coords.push(new L.LatLng(lat2, lng2));\r\n      theta += (Math.PI);  // add 180deg to theta to get opposite corner\r\n    }\r\n    // test polygon\r\n    L.polygon([ [coords[1].lat, coords[0].lng],\r\n                [coords[1].lat, coords[1].lng],\r\n                [coords[0].lat, coords[1].lng],\r\n                [coords[0].lat, coords[0].lng] ], {color: 'red', opacity: 0.05}).addTo(this.map);\r\n\r\n    const coordsToRot = [\r\n      new L.LatLng(coords[1].lat, coords[0].lng),\r\n      new L.LatLng(coords[1].lat, coords[1].lng),\r\n      new L.LatLng(coords[0].lat, coords[1].lng),\r\n      new L.LatLng(coords[0].lat, coords[0].lng)\r\n    ];\r\n\r\n    // apply rotation to bounds\r\n    this.rotateCoordAroundCenter(coordsToRot, Number(hding));\r\n  }\r\n\r\n  private rotateCoordAroundCenter(coords: L.LatLng[], rot: number): void {\r\n    for (let i = 0; i < coords.length; i++) {\r\n      // translate coordinates to (0,0) to rotate\r\n      const tX = coords[i].lat - this.droneCenter.lat;   const tY = coords[i].lng - this.droneCenter.lng;\r\n\r\n      // apply rotation to each coord\r\n      coords[i].lat = (tX * Math.cos(rot * Math.PI / 180) - tY * Math.sin(rot * Math.PI / 180));\r\n      coords[i].lng = (tX * Math.sin(rot * Math.PI / 180) + tY * Math.cos(rot * Math.PI / 180));\r\n      coords[i].lat += this.droneCenter.lat;   coords[i].lng += this.droneCenter.lng;\r\n    }\r\n    this.corners.topLeft = coords[0];\r\n    this.corners.topRight = coords[1];\r\n    this.corners.bottomRight = coords[2];\r\n    this.corners.bottomLeft = coords[3];\r\n  }\r\n\r\n  private radiusAtLat(lat: number): number {\r\n    const rEq = 6378137;  // radius of earth at equator (m)\r\n    const rPl = 6356752;  // radius of earth at poles (m)\r\n    const top = this.sqr( this.sqr(rEq) * Math.cos(lat * Math.PI / 180)) + this.sqr( this.sqr(rPl) * Math.sin(lat * Math.PI / 180));\r\n    const bot = this.sqr(rEq * Math.cos(lat * Math.PI / 180)) + this.sqr(rPl * Math.sin(lat * Math.PI / 180));\r\n    return (Math.sqrt(top / bot));\r\n  }\r\n\r\n  // calculate distance of corners from center given an altitude alt\r\n  private distanceFromC(alt: number): number {\r\n    return alt * (Math.tan((this.FOV / 2) * Math.PI / 180));\r\n  }\r\n\r\n  private sqr(x: number): number {\r\n    return x * x;\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs/Rx';\r\nimport { WebSocketService } from './web-socket.service';\r\nimport { WebRtcPeer } from '../../node_modules/@types/kurento-utils';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class StreamService {\r\n  peer: WebRtcPeer;\r\n  messages: Subject<any>;\r\n\r\n  constructor(private wsService: WebSocketService) {\r\n\r\n   /*  this.messages = <Subject<any>>wsService\r\n      .connect()\r\n      .map((response: any): any => {\r\n        return response;\r\n      }); */\r\n  }\r\n\r\n  sendMessage(msg) {\r\n    this.messages.next(msg);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport * as io from 'socket.io-client';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport * as Rx from 'rxjs/Rx';\r\nimport { environment } from '../environments/environment';\r\nimport * as kurentoUtils from 'kurento-utils';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WebSocketService {\r\n\r\n  // private webSocket;\r\n  private ws = new WebSocket('wss://' + location.host + '/player');\r\n  private webRtcPeer: kurentoUtils.WebRtcPeer;\r\n\r\n  constructor() { }\r\n\r\n\r\n  connect(video: HTMLVideoElement) {\r\n\r\n    this.start(video);\r\n\r\n    this.ws.onmessage = (message) => {\r\n      let parsedMessage = JSON.parse(message.data);\r\n      console.info('Received message: ' + message.data);\r\n\r\n      switch (parsedMessage.id) {\r\n        case 'startResponse':\r\n          this.startResponse(parsedMessage);\r\n          break;\r\n        case 'error':\r\n          console.error('Error message from server: ' + parsedMessage.message);\r\n          break;\r\n        case 'playEnd':\r\n          console.info('Play End');\r\n          break;\r\n        case 'iceCandidate':\r\n          this.webRtcPeer.addIceCandidate(parsedMessage.candidate, function(error) {\r\n            if (error) {\r\n              return console.error('Error adding candidate: ' + error);\r\n            }\r\n          });\r\n          break;\r\n        case 'msgConnInfo':\r\n          console.info('msgConnInfo: ' + parsedMessage.text);\r\n          break;\r\n        case 'msgSdpText':\r\n          console.info('msgSdpText: ' + parsedMessage.text);\r\n          break;\r\n        default:\r\n          console.error('Unrecognized message', parsedMessage);\r\n          break;\r\n      }\r\n    };\r\n  }\r\n\r\n  start(video) {\r\n    console.info('[start] Create WebRtcPeer');\r\n\r\n    let options = {\r\n      remoteVideo: video,\r\n      mediaConstraints: { audio: false, video: true },\r\n      onicecandidate: this.onIceCandidate\r\n    };\r\n\r\n    this.webRtcPeer = kurentoUtils.WebRtcPeer.WebRtcPeerRecvonly(options, (error) => {\r\n        if (error) {\r\n          return console.error(error);\r\n        }\r\n\r\n        console.info('[WebRtcPeer] Generate SDP Offer');\r\n        this.webRtcPeer.generateOffer( (err, offerSdp) => {\r\n          if (err) {\r\n            return console.error('Error generating the SDP Offer');\r\n          }\r\n\r\n          let message = {\r\n            id: 'start',\r\n            sdpOffer: offerSdp,\r\n            useComedia: true,\r\n            useSrtp: false\r\n          };\r\n\r\n          console.info('[onOffer] Received SDP Offer; send message to Kurento Client at ' + location.host);\r\n          console.info('[onOffer] COMEDIA checkbox is: ' + message.useComedia);\r\n          console.info('[onOffer] SRTP checkbox is: ' + message.useSrtp);\r\n          // console.log('[sendMessage] : ', message);\r\n          this.sendMessage(message);\r\n        });\r\n      });\r\n  }\r\n\r\n  stop = () => {\r\n    console.info('[stop] Stop video playback');\r\n\r\n    if (this.webRtcPeer) {\r\n      this.webRtcPeer.dispose();\r\n      this.webRtcPeer = null;\r\n\r\n      let message = {\r\n        id: 'stop'\r\n      };\r\n      // console.log('[sendMessage] : ', message);\r\n      this.sendMessage(message);\r\n    }\r\n  }\r\n\r\n\r\n  startResponse = (message) => {\r\n    console.info('[startResponse] SDP Answer received from Kurento Client; process in WebRtcPeer');\r\n\r\n    this.webRtcPeer.processAnswer(message.sdpAnswer, function(error) {\r\n      if (error) {\r\n        return console.error(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  onIceCandidate = (candidate) => {\r\n    console.log('[onIceCandidate] Local candidate: ' + JSON.stringify(candidate));\r\n\r\n    let message = {\r\n      id: 'onIceCandidate',\r\n      candidate: candidate\r\n    };\r\n    // console.log('[sendMessage] : ', message);\r\n    this.sendMessage(message);\r\n  }\r\n\r\n  onOffer = (error, offerSdp) => {\r\n    if (error) {\r\n      return console.error('Error generating the SDP Offer');\r\n    }\r\n\r\n    let message = {\r\n      id: 'start',\r\n      sdpOffer: offerSdp,\r\n      useComedia: true,\r\n      useSrtp: false\r\n    };\r\n\r\n    console.info('[onOffer] Received SDP Offer; send message to Kurento Client at ' + location.host);\r\n    console.info('[onOffer] COMEDIA checkbox is: ' + message.useComedia);\r\n    console.info('[onOffer] SRTP checkbox is: ' + message.useSrtp);\r\n    // console.log('[sendMessage] : ', message);\r\n    this.sendMessage(message);\r\n  }\r\n\r\n  sendMessage(message) {\r\n    console.info('[sendMessage] message: ' + message);\r\n    console.log(message);\r\n\r\n    let jsonMessage = JSON.stringify(message);\r\n    this.ws.send(jsonMessage);\r\n  }\r\n\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  MAPBOX_API_KEY: 'pk.eyJ1Ijoic3F1cnJsaSIsImEiOiJjamhxY2lkeTcxOG9jMzdudTZkYm9jbmlkIn0.zvZPOE4XHex2E18F0FSdSg',\r\n  ws_url: 'ws://localhost:8080'\r\n};\r\n\r\n/*\r\n * In development mode, to ignore zone related error stack frames such as\r\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\r\n * import the following file, but please comment it out in production mode\r\n * because it will have performance impact when throw error\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n"],"sourceRoot":""}